{% extends "base.html" %}
{% block title %} Create a new goal {% endblock %}
{% block nav %}
            <li><a href="/">Home</a></li>
            <li class="active"><a href="#">New goal</a></li>
            <li><a href="goalViewer">Your goals</a></li>
            <li><a href="#">Profile</a></li>
{% endblock %}

{% block body %}
    <style type="text/css">
      body { padding-top: 60px; }
    </style>

	<script src="bootstrap/js/bootstrap-datepicker.js"></script>
	<script type="text/javascript">
		$(function(){
			$('#datePickerDL').datepicker();
		});
	</script>
	<script type="text/javascript">
		
		//TODO: Get Username and Image.
		//TODO: Get a nice image to go on the right side.

		function postToFeed() {

			var username = "Placeholder";
			var goalTypeSelect = document.getElementById('ddGoalType').value;
			var goalType = "";
			var pictureLink = "Placeholder.jpg";
			var goalTitle = document.getElementById('tbGoalName').value;
			var goalDesc = document.getElementById('tbGoalDesc').value;
			var goalDeadline = document.getElementById('datePickerDL').value;
			var fbDescription = username + " wants to " + goalDesc + " by " + goalDeadline;

			switch (goalTypeSelect)
			{
			case "fitnessGoal":
 				goalType="A Fitness Goal";
				break;
			case "academicGoal":
				goalType="An Academic Goal";
				break;
			case "lifeGoal":
				goalType="A Life Goal";
				break;
			} 

			window.location = "https://www.facebook.com/dialog/feed?app_id=435215956532387&link=http://apps.facebook.com/improve-app&picture= " + pictureLink + "&name=" + username + "%20Has%20Set%20A%20New%20Goal&caption= " + goalType + "&description= " + fbDescription + "&redirect_uri=http://apps.facebook.com/improve-app";
      }

	</script>

	{% if goal %}
	 
	New goal created

	<table>
	  <tr>
	    
	      <th>Name </th>
	      <th>Category</th>
	      <th>Description</th>
	      <th>Due date</th>
	      <th>Created</th>
	      <th>Public</th>
	    </tr>
	<tr> 
	<td>
	{{goal.name}}
	</td>
	<td>
	{{goal.category}}
	</td>
	<td>
	{{goal.description}}
	</td>
	<td>
	{% if goal.dueDate %}
	{{goal.dueDate}}
	{% endif %}
	</td>
	<td>
	{{goal.created|date:"d.m.Y"}}
	</td>
	<td>
	{{goal.public}}
	</td>
	</table>

	<br>
	<br>
	<br>
	{% endif %}
		

	<form action="/newGoal" method="get" class="well">
	        
	<div class="container">
		<div class="row">
		<div class="span12">
		<h1>Set A New Goal!</h1> 
		</div>
		</div>
		<div class="row">
			<div class="span2"><h4>This is a ... </h4></div>
			<div class="span4"><fieldset>          
        		<div class="control-group">
        			<div class="controls">
          			 <select id = "ddGoalType">
               	 	 <option value="fitnessGoal">Fitness Goal</option>
                	 <option value="academicGoal">Academic Goal</option>
                	 <option value="lifeGoal">Life Goal</option>
            		</select>
        			</div>
        		</div>
   		 </fieldset></div>
		</div>
		<div class="row">
			<div class="span2"><h4>Goal Title</h4></div>
			<div class="span4"><input id="tbGoalName" name="goalName" class="text" type="text"/></div>
		</div>
		<div class="row">
			<div class="span2"><h4>I Want To...</h4></div>
			<div class="span4"><textarea rows="3" id="tbGoalDesc" name="goalDescription"> </textarea></div>
		</div>
		<div class="row">
			<div class="span2"><h4>I Want It By</h4></div>
			<div class="span4"><input type="text" class="span2" value="17/12/12" data-date-format="dd/mm/yy" id="datePickerDL" ></input></div>
		</div>
		<div class="row">
			<div class="span6"><hr></div>
		</div>
		<div class="row">
			<div class="span4 offset1"><h4>Let All My Friends Know?</h4></div>
		</div>
		<div class="row">
			<div class="span6"><br/></div>
		</div>
		
		<div class="row">
			<div class="span3"><button id="btnGoalSubmitPublic" class="btn btn-primary" type="button" onclick="postToFeed()">Tell The World!</button></div>
			<div class="span3"><button id="btnGoalSubmitPrivate" class="btn btn-primary" type="button">Private Goal</button></div>
		</div>
	                

	</div>
		</form>

{% endblock %}
